(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76b5931a"],{"048f":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"writer",class:{"writer-subfield":t.subfield,"writer-not-subfield":!t.subfield}},[n("div",{staticClass:"anthologyList"},[n("el-button",{staticClass:"create-anthology",attrs:{type:"text"},on:{click:t.toCreateAnthology}},[n("i",{staticClass:"fa fa-plus"}),t._v("新建文集")]),n("transition-left",[t.isCreateAnthology?n("input",{directives:[{name:"model",rawName:"v-model",value:t.anthologyName,expression:"anthologyName"}],staticClass:"anthologyName",attrs:{maxlength:"50",placeholder:"请输入文集名..."},domProps:{value:t.anthologyName},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t._createAnthology(e)},input:function(e){e.target.composing||(t.anthologyName=e.target.value)}}}):t._e()]),n("transition-right",[t.isCreateAnthology?n("div",{staticClass:"anthologyName-operation"},[n("el-button",{staticStyle:{color:"#42c02e"},attrs:{type:"text"},on:{click:t._createAnthology}},[t._v("提交")]),n("el-button",{staticStyle:{color:"#999"},attrs:{type:"text"},on:{click:function(e){t.isCreateAnthology=!1}}},[t._v("取消")])],1):t._e()]),n("transition-list",{staticClass:"transition-anthologyList",style:"grid-row-start: span "+t.anthologyList.length,attrs:{tag:"div"}},t._l(t.anthologyList,(function(e,i){return n("div",{key:e.id,staticClass:"anthology",class:{isSelected:i==t.selectedAnthology},attrs:{title:e.name},on:{click:function(e){t.selectedAnthology=i}}},[n("span",[t._v(t._s(e.name))]),n("transition-rotate",[i==t.selectedAnthology?n("el-popover",{attrs:{transition:"popover","popper-class":"writer-tip-popover",placement:"bottom-end",width:"135",trigger:"click"}},[n("div",{staticClass:"popover-tip"},[n("div",{on:{click:function(n){return t.editAnthologyName(e)}}},[n("i",{staticClass:"fa fa-pencil-square-o"}),t._v("修改文集")]),n("div",{on:{click:function(n){return t._deleteAnthology(e)}}},[n("i",{staticClass:"fa fa-trash-o"}),t._v("删除文集")])]),n("i",{staticClass:"fa fa-gear",attrs:{slot:"reference"},slot:"reference"})]):t._e()],1)],1)})),0)],1),n("div",{staticClass:"articleList"},[n("div",{staticClass:"create-article",on:{click:t._createArticle}},[n("i",{staticClass:"fa fa-plus-circle"}),n("span",[t._v("新建文章")])]),n("transition-list",{staticClass:"transition-articleList",style:"grid-row-start: span "+t.articleList.length,attrs:{tag:"div",name:"listde"}},t._l(t.articleList,(function(e,i){return n("div",{key:e.id,staticClass:"article",class:{isSelected:i==t.selectedArticle},on:{click:function(e){t.selectedArticle=i}}},[n("span",[t._v(t._s(e.name))]),n("transition-rotate",{attrs:{color:"#595959"}},[i==t.selectedArticle?n("el-popover",{attrs:{transition:"popover","popper-class":"writer-tip-popover",placement:"bottom-end",width:"144",trigger:"click"}},[n("div",{staticClass:"popover-tip"},[n("div",{on:{click:function(n){return t._deleteArticle(e)}}},[n("i",{staticClass:"fa fa-trash-o"}),t._v("删除文章")])]),n("i",{staticClass:"fa fa-gear",attrs:{slot:"reference"},slot:"reference"})]):t._e()],1)],1)})),0)],1),n("div",{staticClass:"write-mavon"},[n("el-input",{ref:"articleTitle",staticClass:"context-title",attrs:{disabled:!t.currentArticle,maxlength:"50",placeholder:"文章标题"},model:{value:t.articleTitle,callback:function(e){t.articleTitle=e},expression:"articleTitle"}}),n("mavon-editor",{directives:[{name:"show",rawName:"v-show",value:t.currentArticle,expression:"currentArticle"}],ref:"md",staticClass:"mavon-editor",attrs:{ishljs:!0,codeStyle:"vs2015",subfield:t.subfield,fullscreen:!0,toolbars:t.toolbars},on:{subfieldToggle:t.subfieldToggle,save:t.save,imgAdd:t.$imgAdd,imgDel:t.$imgDel},model:{value:t.articleContext,callback:function(e){t.articleContext=e},expression:"articleContext"}})],1)])},r=[],o=(n("b0c0"),n("5530")),a=n("c1df"),c=n.n(a),s=n("2f62"),l={data:function(){return{selectedAnthology:0,anthologyList:[],anthologyName:"",isCreateAnthology:!1,selectedArticle:0,articleList:[],articleTitle:"",img_file:[],articleContext:" ",subfield:!1,toolbars:{bold:!0,italic:!0,header:!0,underline:!0,mark:!0,superscript:!0,quote:!0,ul:!0,ol:!0,link:!0,imagelink:!0,help:!0,code:!0,subfield:!0,undo:!0,trash:!0,save:!0}}},computed:{currentAnthology:function(){return this.anthologyList[this.selectedAnthology]||null},currentArticle:function(){return this.articleList[this.selectedArticle]||null}},watch:{"currentAnthology.id":function(t,e){e?this._getArticleList():setTimeout(this._getArticleList,800)},"currentArticle.id":function(t){this.currentArticle?(this.articleTitle=this.currentArticle.name||"",this.articleContext=this.currentArticle.context||"",this.$refs.articleTitle.focus()):(this.articleTitle="",this.articleContext="")}},created:function(){this._getAnthologyList()},mounted:function(){},methods:Object(o["a"])(Object(o["a"])({},Object(s["b"])(["uploadFile","createAnthology","updateAnthology","getAnthologyList","deleteAnthology","createArticle","updateArticle","getArticleList","deleteArticle"])),{},{toCreateAnthology:function(){this.anthologyName="",this.isCreateAnthology=!0},_createAnthology:function(){var t=this;this.anthologyName?this.createAnthology({name:this.anthologyName}).then((function(e){200===e.data.code&&(t.isCreateAnthology=!1,t._getAnthologyList())})):this.$message.error("请输入文集名...")},_getAnthologyList:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.getAnthologyList({}).then((function(n){200===n.data.code&&(e?(t.anthologyList=n.data.data.list,t.selectedAnthology=0):t.anthologyList=n.data.data.list)}))},editAnthologyName:function(t){var e=this;this.$prompt("请输入文集名称","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^.{1,50}$/,inputErrorMessage:"请输入正确文集名称"}).then((function(n){var i=n.value;t.name=i,e.updateAnthology(t).then((function(t){200===t.data.code&&e._getAnthologyList(!1)}))})).catch((function(){}))},_deleteAnthology:function(t){var e=this;this.$confirm("确认删除文集《".concat(t.name,"》？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.deleteAnthology(t).then((function(t){200===t.data.code&&(e._getAnthologyList(),e.$message({type:"success",message:"删除成功!"}))}))}))},_createArticle:function(){var t=this;if(this.currentAnthology&&this.currentAnthology.id){var e={name:c()().format("YYYY-MM-DD"),aid:this.currentAnthology.id};this.createArticle(e).then((function(e){200===e.data.code&&(t._getArticleList(),t.$message({type:"success",message:"创建成功!"}))}))}else this.$message.error("请选择文集")},_saveArticle:function(t){var e=this;t.name=this.articleTitle,t.context=this.articleContext,this.updateArticle(t).then((function(t){200===t.data.code&&(e._getArticleList(!1),e.$message({type:"success",message:"保存成功!"}))}))},_deleteArticle:function(t){var e=this;this.$confirm("确认删除文章《".concat(t.name,"》？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.deleteArticle(t).then((function(t){200===t.data.code&&(e._getArticleList(),e.$message({type:"success",message:"删除成功!"}))}))}))},_getArticleList:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.getArticleList({AnthologyId:this.currentAnthology.id}).then((function(n){e?(t.articleList=n.data.data.list,t.selectedArticle=0):t.articleList=n.data.data.list}))},save:function(){this._saveArticle(this.currentArticle)},subfieldToggle:function(t,e){this.subfield=t},$imgAdd:function(t,e){var n=this,i=new FormData;i.append("file",e),this.img_file[t]=e,this.uploadFile(i).then((function(e){var i=e.data.data;n.$refs.md.$img2Url(t,n.fileUrl+"/"+i.value)}))},$imgDel:function(t){delete this.img_file[t]}})},u=l,f=(n("2d3a"),n("1419"),n("2877")),d=Object(f["a"])(u,i,r,!1,null,"4f9ac33e",null);e["default"]=d.exports},"057f":function(t,e,n){var i=n("fc6a"),r=n("241c").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(t){try{return r(t)}catch(e){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?c(t):r(i(t))}},1419:function(t,e,n){"use strict";var i=n("c119a"),r=n.n(i);r.a},"2d3a":function(t,e,n){"use strict";var i=n("a432"),r=n.n(i);r.a},5530:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));n("a4d3"),n("4de4"),n("4160"),n("e439"),n("dbb4"),n("b64b"),n("159b");function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},"746f":function(t,e,n){var i=n("428f"),r=n("5135"),o=n("e538"),a=n("9bf2").f;t.exports=function(t){var e=i.Symbol||(i.Symbol={});r(e,t)||a(e,t,{value:o.f(t)})}},8418:function(t,e,n){"use strict";var i=n("c04e"),r=n("9bf2"),o=n("5c6c");t.exports=function(t,e,n){var a=i(e);a in t?r.f(t,a,o(0,n)):t[a]=n}},a432:function(t,e,n){},a4d3:function(t,e,n){"use strict";var i=n("23e7"),r=n("da84"),o=n("d066"),a=n("c430"),c=n("83ab"),s=n("4930"),l=n("fdbf"),u=n("d039"),f=n("5135"),d=n("e8b5"),h=n("861d"),g=n("825a"),p=n("7b0b"),y=n("fc6a"),b=n("c04e"),v=n("5c6c"),m=n("7c73"),A=n("df75"),w=n("241c"),O=n("057f"),_=n("7418"),C=n("06cf"),j=n("9bf2"),L=n("d1e7"),k=n("9112"),x=n("6eeb"),S=n("5692"),P=n("f772"),T=n("d012"),N=n("90e3"),$=n("b622"),D=n("e538"),E=n("746f"),B=n("d44e"),F=n("69f3"),J=n("b727").forEach,Y=P("hidden"),M="Symbol",q="prototype",I=$("toPrimitive"),U=F.set,Q=F.getterFor(M),W=Object[q],z=r.Symbol,G=o("JSON","stringify"),H=C.f,K=j.f,R=O.f,V=L.f,X=S("symbols"),Z=S("op-symbols"),tt=S("string-to-symbol-registry"),et=S("symbol-to-string-registry"),nt=S("wks"),it=r.QObject,rt=!it||!it[q]||!it[q].findChild,ot=c&&u((function(){return 7!=m(K({},"a",{get:function(){return K(this,"a",{value:7}).a}})).a}))?function(t,e,n){var i=H(W,e);i&&delete W[e],K(t,e,n),i&&t!==W&&K(W,e,i)}:K,at=function(t,e){var n=X[t]=m(z[q]);return U(n,{type:M,tag:t,description:e}),c||(n.description=e),n},ct=l?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof z},st=function(t,e,n){t===W&&st(Z,e,n),g(t);var i=b(e,!0);return g(n),f(X,i)?(n.enumerable?(f(t,Y)&&t[Y][i]&&(t[Y][i]=!1),n=m(n,{enumerable:v(0,!1)})):(f(t,Y)||K(t,Y,v(1,{})),t[Y][i]=!0),ot(t,i,n)):K(t,i,n)},lt=function(t,e){g(t);var n=y(e),i=A(n).concat(gt(n));return J(i,(function(e){c&&!ft.call(n,e)||st(t,e,n[e])})),t},ut=function(t,e){return void 0===e?m(t):lt(m(t),e)},ft=function(t){var e=b(t,!0),n=V.call(this,e);return!(this===W&&f(X,e)&&!f(Z,e))&&(!(n||!f(this,e)||!f(X,e)||f(this,Y)&&this[Y][e])||n)},dt=function(t,e){var n=y(t),i=b(e,!0);if(n!==W||!f(X,i)||f(Z,i)){var r=H(n,i);return!r||!f(X,i)||f(n,Y)&&n[Y][i]||(r.enumerable=!0),r}},ht=function(t){var e=R(y(t)),n=[];return J(e,(function(t){f(X,t)||f(T,t)||n.push(t)})),n},gt=function(t){var e=t===W,n=R(e?Z:y(t)),i=[];return J(n,(function(t){!f(X,t)||e&&!f(W,t)||i.push(X[t])})),i};if(s||(z=function(){if(this instanceof z)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=N(t),n=function(t){this===W&&n.call(Z,t),f(this,Y)&&f(this[Y],e)&&(this[Y][e]=!1),ot(this,e,v(1,t))};return c&&rt&&ot(W,e,{configurable:!0,set:n}),at(e,t)},x(z[q],"toString",(function(){return Q(this).tag})),x(z,"withoutSetter",(function(t){return at(N(t),t)})),L.f=ft,j.f=st,C.f=dt,w.f=O.f=ht,_.f=gt,D.f=function(t){return at($(t),t)},c&&(K(z[q],"description",{configurable:!0,get:function(){return Q(this).description}}),a||x(W,"propertyIsEnumerable",ft,{unsafe:!0}))),i({global:!0,wrap:!0,forced:!s,sham:!s},{Symbol:z}),J(A(nt),(function(t){E(t)})),i({target:M,stat:!0,forced:!s},{for:function(t){var e=String(t);if(f(tt,e))return tt[e];var n=z(e);return tt[e]=n,et[n]=e,n},keyFor:function(t){if(!ct(t))throw TypeError(t+" is not a symbol");if(f(et,t))return et[t]},useSetter:function(){rt=!0},useSimple:function(){rt=!1}}),i({target:"Object",stat:!0,forced:!s,sham:!c},{create:ut,defineProperty:st,defineProperties:lt,getOwnPropertyDescriptor:dt}),i({target:"Object",stat:!0,forced:!s},{getOwnPropertyNames:ht,getOwnPropertySymbols:gt}),i({target:"Object",stat:!0,forced:u((function(){_.f(1)}))},{getOwnPropertySymbols:function(t){return _.f(p(t))}}),G){var pt=!s||u((function(){var t=z();return"[null]"!=G([t])||"{}"!=G({a:t})||"{}"!=G(Object(t))}));i({target:"JSON",stat:!0,forced:pt},{stringify:function(t,e,n){var i,r=[t],o=1;while(arguments.length>o)r.push(arguments[o++]);if(i=e,(h(e)||void 0!==t)&&!ct(t))return d(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!ct(e))return e}),r[1]=e,G.apply(null,r)}})}z[q][I]||k(z[q],I,z[q].valueOf),B(z,M),T[Y]=!0},b0c0:function(t,e,n){var i=n("83ab"),r=n("9bf2").f,o=Function.prototype,a=o.toString,c=/^\s*function ([^ (]*)/,s="name";i&&!(s in o)&&r(o,s,{configurable:!0,get:function(){try{return a.call(this).match(c)[1]}catch(t){return""}}})},b64b:function(t,e,n){var i=n("23e7"),r=n("7b0b"),o=n("df75"),a=n("d039"),c=a((function(){o(1)}));i({target:"Object",stat:!0,forced:c},{keys:function(t){return o(r(t))}})},c119a:function(t,e,n){},dbb4:function(t,e,n){var i=n("23e7"),r=n("83ab"),o=n("56ef"),a=n("fc6a"),c=n("06cf"),s=n("8418");i({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(t){var e,n,i=a(t),r=c.f,l=o(i),u={},f=0;while(l.length>f)n=r(i,e=l[f++]),void 0!==n&&s(u,e,n);return u}})},e439:function(t,e,n){var i=n("23e7"),r=n("d039"),o=n("fc6a"),a=n("06cf").f,c=n("83ab"),s=r((function(){a(1)})),l=!c||s;i({target:"Object",stat:!0,forced:l,sham:!c},{getOwnPropertyDescriptor:function(t,e){return a(o(t),e)}})},e538:function(t,e,n){var i=n("b622");e.f=i}}]);
//# sourceMappingURL=chunk-76b5931a.2f8a3986.js.map